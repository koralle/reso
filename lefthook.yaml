pre-commit:
  parallel: true
  jobs:
    - name: web
      group:
        piped: true
        jobs:
          - name: Fix with Biome (Web)
            root: apps/web
            glob:
              # Typescript
              - '**/*.ts'
              - '**/*.tsx'
              - vite.config.ts
              - worker-configuration.d.ts

              # JSON
              - package.json
              - tsconfig.json
              - biome.jsonc
              - wrangler.jsonc
              - '.vscode/settings.json'

              # CSS
              - 'src/**/*.css'

            run: |
              bun biome check \
                {staged_files} \
                --fix
            stage_fixed: true

          - name: Typecheck (Web)
            root: apps/web
            glob:
              # Typescript
              - '**/*.ts'
              - '**/*.tsx'
              - vite.config.ts
              - worker-configuration.d.ts

              # JSON
              - tsconfig.json
            run: |
              bun tsgo
